<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>互動三折頁｜按鈕翻頁＋摺線陰影（修正版 v2）</title>
  <style>
    :root{ --ink:#e5e7eb; --bg:#0b0c10; --panel:#0f172a; }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 600px at 50% -10%,#111827,#0b0c10);font-family:ui-sans-serif,system-ui,"Noto Sans TC",-apple-system,"Segoe UI",Roboto,Helvetica,Arial;color:var(--ink);display:flex;flex-direction:column;align-items:center;gap:14px;padding:18px}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);padding:8px 10px;border-radius:12px;backdrop-filter:blur(8px)}
    .toolbar button{cursor:pointer;border:none;padding:10px 14px;border-radius:10px;font-weight:700;color:#0b1220;background:#f9fafb}
    .toolbar button.secondary{background:#1f2937;color:#e5e7eb;border:1px solid #374151}

    .stage{width:min(1100px,95vw);aspect-ratio:3/2;position:relative;border-radius:16px;overflow:hidden;background:#0f172a;box-shadow:0 30px 80px rgba(0,0,0,.45),inset 0 0 0 1px rgba(255,255,255,.06);}
    .brochure{position:absolute;inset:0;display:flex}

    .panel{flex:1 1 33.333%;position:relative;opacity:1;transition:opacity 380ms ease;z-index:1}
    .panel.left{z-index:3}
    .panel.center{z-index:2}
    .panel.right{z-index:1}
    .hidden{opacity:0;pointer-events:none}

    .page{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:var(--panel);overflow:hidden;box-shadow:inset 0 0 30px rgba(0,0,0,.45)}
    .page img{width:100%;height:100%;object-fit:contain;display:block}

    /* 強烈摺線陰影 */
    .crease{position:absolute;top:0;bottom:0;width:14px;pointer-events:none}
    .crease.left{left:33.333%}
    .crease.right{left:66.666%}
    .crease:before,.crease:after{content:"";position:absolute;inset:0;background:linear-gradient(to right,rgba(0,0,0,.55),rgba(0,0,0,0) 50%),linear-gradient(to left,rgba(0,0,0,.55),rgba(0,0,0,0) 50%);mix-blend-mode:multiply;opacity:.85;filter:blur(.4px)}

    .hint{font-size:12px;opacity:.75}
  </style>
</head>
<body>
  <div class="toolbar">
    <button id="prevBtn" class="secondary">上一頁</button>
    <button id="nextBtn">下一頁</button>
    <button id="zoomIn">放大</button>
    <button id="zoomOut" class="secondary">縮小</button>
  </div>
  <div class="hint">順序：1 封面 outer-right → 2 初開（左：inner-left｜右：outer-left） → 3 全開（inner-left / inner-center / inner-right） → 4 回初開 → 5 回封面 → 6 翻面（outer-center）。</div>

  <div class="stage">
    <div class="brochure" id="brochure" style="transform:scale(1)">
      <div class="panel left" id="pLeft">
        <div class="page"><img src="inner-left.jpg" alt="inner-left"></div>
      </div>
      <div class="panel center" id="pCenter">
        <div class="page"><img src="inner-center.jpg" alt="inner-center"></div>
      </div>
      <div class="panel right" id="pRight">
        <div class="page"><img id="rightImg" src="outer-right.jpg" alt="right"></div>
      </div>

      <div class="crease left"></div>
      <div class="crease right"></div>
    </div>
  </div>

  <script>
    // 1=only outer-right, 2=inner-left+outer-left, 3=inner-left+inner-center+inner-right, 4=回初開, 5=回封面, 6=翻面 outer-center
    let stage = 1;

    const pLeft   = document.getElementById('pLeft');
    const pCenter = document.getElementById('pCenter');
    const pRight  = document.getElementById('pRight');
    const rightImg = document.getElementById('rightImg');
    const brochure = document.getElementById('brochure');

    const setVis = (el, show) => el.classList.toggle('hidden', !show);

    function applyStage(){
      switch(stage){
        case 1: // 只有 outer-right
          rightImg.src = 'outer-right.jpg';
          setVis(pLeft,false); setVis(pCenter,false);
          break;
        case 2: // 左 inner-left + 右 outer-left
          rightImg.src = 'outer-left.jpg';
          setVis(pLeft,true); setVis(pCenter,false);
          break;
        case 3: // 全開：左 inner-left + 中 inner-center + 右 inner-right
          rightImg.src = 'inner-right.jpg';
          setVis(pLeft,true); setVis(pCenter,true);
          break;
        case 4: // 回初開（同 2）
          rightImg.src = 'outer-left.jpg';
          setVis(pLeft,true); setVis(pCenter,false);
          break;
        case 5: // 回封面（同 1）
          rightImg.src = 'outer-right.jpg';
          setVis(pLeft,false); setVis(pCenter,false);
          break;
        case 6: // 翻面：outer-center
          rightImg.src = 'outer-center.jpg';
          setVis(pLeft,false); setVis(pCenter,false);
          break;
      }
    }

    document.getElementById('nextBtn').addEventListener('click',()=>{ stage = (stage===6)?1:stage+1; applyStage(); });
    document.getElementById('prevBtn').addEventListener('click',()=>{ stage = (stage===1)?6:stage-1; applyStage(); });

    // Zoom
    let scale = 1; const clamp=(v,min,max)=>Math.min(max,Math.max(min,v));
    function setScale(){ brochure.style.transform = `scale(${scale})`; }
    document.getElementById('zoomIn').addEventListener('click',()=>{ scale = clamp(scale+0.1,0.8,2); setScale(); });
    document.getElementById('zoomOut').addEventListener('click',()=>{ scale = clamp(scale-0.1,0.8,2); setScale(); });

    applyStage();
  </script>
</body>
</html>